#!/usr/bin/env rust
//! Test the `in` operator for containment checking

// Test with string contains
let result1 = "hello" in "hello world";
println!("'hello' in 'hello world': {}", result1);
assert!(result1);

let result2 = "xyz" in "hello world";
println!("'xyz' in 'hello world': {}", result2);
assert!(!result2);

// Test with Vec contains (Vec::contains takes &T)
let numbers = vec![1, 2, 3, 4, 5];
let result3 = &3 in numbers;
println!("3 in [1,2,3,4,5]: {}", result3);
assert!(result3);

let result4 = &10 in numbers;
println!("10 in [1,2,3,4,5]: {}", result4);
assert!(!result4);

// Test with array slice
let arr = [1, 2, 3];
let result5 = &2 in &arr[..];
println!("2 in [1,2,3]: {}", result5);
assert!(result5);

// Test in if condition
if "rust" in "hello rust world" {
    println!("Found 'rust' in the string!");
} else {
    panic!("Should have found 'rust'!");
}

// Test in if condition with Vec
if &5 in &numbers {
    println!("Found 5 in numbers!");
} else {
    panic!("Should have found 5!");
}


text := "hello world"
result1 := "hello" in text
result2 := "xyz" in text

put!("'hello' in '%s': %t\n", text, result1)
put!("'xyz' in '%s': %t\n", text, result2)

// Test with variables
needle := "world"
result3 := needle in text
put!("'%s' in '%s': %t\n", needle, text, result3)
assert!(needle in text)

// Edge case: empty string in non-empty string (should be true)
assert!("" in "hello");
assert!("" in "");

// Edge case: empty collection
let empty_vec: Vec<i32> = vec![];
assert!(!(&1 in &empty_vec));
assert!(!(&0 in &empty_vec));

// Edge case: single element collection
let single = vec![42];
assert!(&42 in &single);
assert!(!(&41 in &single));

// Edge case: string at boundaries
assert!("hello" in "hello world");
assert!("world" in "hello world");
assert!("hello world" in "hello world");

// Edge case: substring not found variations
assert!(!("Hello" in "hello"));  // case sensitive
assert!(!("helo" in "hello"));   // missing character
assert!(!("hello world!" in "hello world"));  // extra character

// Edge case: single character searches
assert!("h" in "hello");
assert!("o" in "hello");
assert!(!("x" in "hello"));

// Edge case: repeated elements
let repeated = vec![1, 2, 2, 3, 2, 4];
assert!(&2 in &repeated);
assert!(&1 in &repeated);
assert!(&4 in &repeated);
assert!(!(&5 in &repeated));

// Edge case: boundary values
let range_vec = vec![0, 1, 2, 3, 4, 5];
assert!(&0 in &range_vec);  // first element
assert!(&5 in &range_vec);  // last element
assert!(!(&-1 in &range_vec));
assert!(!(&6 in &range_vec));

println!("All tests passed!");
