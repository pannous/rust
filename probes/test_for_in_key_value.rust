#!/usr/bin/env rust

#[test]
fn test_pairs_single_element() {
    let single = [99];
    let mut index_sum = 0;
    let mut value_sum = 0;
    for (i, v) in single.pairs() {
        index_sum += i;
        value_sum += v;
    }
    eq!(index_sum, 0);
    eq!(value_sum, 99);
}

#[test]
fn test_pairs_index_accumulation() {
    let mut idx_accum = 0;
    for (i, _v) in [100, 200, 300, 400].pairs() {
        idx_accum += i;
    }
    eq!(idx_accum, 6);
}

#[test]
fn test_pairs_break_on_first() {
    let mut first_idx = 999;
    let mut first_val = 999;
    for (i, v) in [5, 10, 15].pairs() {
        first_idx = i;
        first_val = v;
        break;
    }
    eq!(first_idx, 0);
    eq!(first_val, 5);
}

#[test]
fn test_pairs_continue_skip_odd_indices() {
    let mut even_idx_sum = 0;
    for (i, v) in [10, 20, 30, 40, 50].pairs() {
        if i % 2 != 0 {
            continue;
        }
        even_idx_sum += v;
    }
    eq!(even_idx_sum, 90);
}
