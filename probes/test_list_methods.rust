#!/usr/bin/env rust
// Test working list methods
// DON'T REMOVE TESTS even if they fail

my_list := [1, 2, 3]

// Basic indexing
eq!( my_list[1] , 2 )

// first/last - note: returns Option<&T>
eq!( my_list.first() , Some(&1) )
eq!( my_list.last() , Some(&3) )

// len / size / length
eq!( my_list.len() , 3 )
eq!( my_list.size() , 3 )
eq!( my_list.length() , 3 )

// contains - needs & or use 'in' operator
eq!( my_list.contains(&2) , true )
eq!( my_list.contains(&5) , false )

// 'in' operator (auto-borrows)
eq!( 2 in my_list , true )
eq!( 5 in my_list , false )

// sort (in place)
sorted := [3, 1, 2]
sorted.sort()
eq!( sorted , [1,2,3] )

// to_vec (clone)
eq!( my_list.to_vec() , vec![1,2,3] )

// String list join
stringList := ["3", "2", "1"]
eq!( stringList.join("-") , "3-2-1" )
eq!( stringList.join("") , "321" )

// iter
sum := 0
for x in my_list.iter() { sum += x }
eq!( sum , 6 )

// get (safe indexing)
eq!( my_list.get(1) , Some(&2) )
eq!( my_list.get(99) , None )

// is_empty
eq!( my_list.is_empty() , false )
let empty: [i32; 0] = []
eq!( empty.is_empty() , true )

// reverse on vec (mutating)
rev := vec![1, 2, 3]
rev.reverse()
eq!( rev , vec![3, 2, 1] )

// ===== NEW METHODS FROM ScriptSliceExt =====

// indexOf - returns index or -1 if not found
eq!( my_list.indexOf(&2) , 1 )
eq!( my_list.indexOf(&5) , -1 )

// slice(start, end) - non-mutating slice to vec
eq!( my_list.slice(1,3) , vec![2,3] )
eq!( my_list.slice(0,2) , vec![1,2] )

// copy - clone to vec
eq!( my_list.copy() , vec![1,2,3] )

// append - non-mutating, returns new vec
eq!( my_list.append(4) , vec![1,2,3,4] )

// prepend - non-mutating, returns new vec
eq!( my_list.prepend(0) , vec![0,1,2,3] )

// insert - non-mutating, returns new vec
eq!( my_list.insert(1, 99) , vec![1,99,2,3] )

// reversed - non-mutating reverse
eq!( my_list.reversed() , vec![3,2,1] )

// sorted - non-mutating sort
eq!( [3,1,2].sorted() , vec![1,2,3] )

// sortDesc - non-mutating descending sort
eq!( [1,2,3].sortDesc() , vec![3,2,1] )

// len() function form (needs typed vec for empty case)
let emptyVec: Vec<i32> = @[]
eq!( len(emptyVec) , 0 )
eq!( len(@[1]) , 1 )
eq!( len(@[1,2,3]) , 3 )

put!("All list method tests passed!\n")
